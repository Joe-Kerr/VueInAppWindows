(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["inAppWindows"]=t():e["inAppWindows"]=t()})("undefined"!==typeof self?self:this,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="fae3")}({f6fd:function(e,t){(function(e){var t="currentScript",n=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(o){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(o.stack)||[!1])[1];for(e in n)if(n[e].src==t||"interactive"==n[e].readyState)return n[e];return null}}})})(document)},fae3:function(e,t,n){"use strict";n.r(t);var o={};n.r(o),n.d(o,"getArrayElWIdxByIdFactory",function(){return w});var i={};n.r(i),n.d(i,"setPropVal",function(){return h}),n.d(i,"setProps",function(){return m}),n.d(i,"setArrayElPropsByIdFactory",function(){return g});var r,s={};(n.r(s),n.d(s,"passThruActionsFactory",function(){return x}),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(n.p=r[1]));function a(e={},t={}){const n={};for(const i in t){const o=t[i],r=e[i],s=o.type,a=typeof r,d=o.required,c=i in e;if("undefined"===typeof s)throw new Error("type property on default is missing");if(d&&!c)throw new Error("Config property '"+i+"' is required but not provided.");if(c&&null!==s&&a!==s)throw new Error("Config property '"+i+"' must be of type '"+s+"' but is of type '"+a+"'.");n[i]=c?r:o.default}const o=[];for(const i in e)i in t||o.push(i);return o.length>0&&console.warn("The following config property was / properties were provided for which no defaults exist: "+o.toString()),n}function d(e){return"$"===e[0]&&"_"===e[1]&&e.substring(2).indexOf("_")>-1}function c(e,t=!1){if("string"!==typeof e){if(!0===t)throw new Error("Tried to write a non-string property to the object root.");return!1}const n=["data","props","propsData","computed","methods","watch","el","template","render","renderError","beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","activated","deactivated","beforeDestroy","destroyed","errorCaptured","directives","filters","components","parent","mixins","extends","provide","inject","name","delimiters","functional","model","inheritAttrs","comments"],o=-1===n.indexOf(e);if(!1===o&&!0===t)throw new Error("Adding property to object root failed. '"+e+"' is a reserved Vue property.");return o}function f(e,t){for(const n in t){if(n in e)throw new Error("Tried to write property on component that already exists: "+n);if(!d(n))throw new Error("Private property names should be in the form of: $_namespace_propertyName. This is important especially for plugins in order to avoid name collisions. See also https://vuejs.org/v2/style-guide/#Private-property-names-essential");e[n]=t[n]}}function p(e,t,n){if("string"!==typeof t)throw new Error("namespace parameter must be of type string.");if("object"!==typeof n)throw new Error("module parameter must be of type object.");const o=["state","getters","mutations","actions","modules"];let i=0;if(o.forEach(e=>{n.hasOwnProperty(e)&&i++}),0===i)throw new Error("Vuex module is of unexpected structure. Expected to see at least one of: "+o.toString(","));if("undefined"===typeof e||"undefined"===typeof e.dispatch)throw new Error(`Plugin ${t} requires vuex instance as config parameter: Vue.use(${t}, {vuex: instanceOfVuex}).`);e.registerModule(t,n)}function u(e,t,n={}){if(!("version"in e))throw new Error("The version property is missing on the Vue instance.");if(e.version.replace(/[0-9\.]/g,"").length>0)throw new Error("Vue version is not in a dot-separated format. Got: "+e.version);if((""+t).replace(/[0-9\.]/g,"").length>0)throw new Error("The required version is not in a dot-separated format. Got: "+e.version);const o=e.version.split(".").map(e=>parseInt(e)),i=t.split(".").map(e=>parseInt(e)),r=void 0!==n.throwInsteadOfReturn&&n.throwInsteadOfReturn;let s=!0;if(i.forEach(e=>{if("number"!==typeof e||isNaN(e))throw new Error("The required version is not in the format x, x.y or x.y.z. Got: "+t)}),i.length>3||i.length<1)throw new Error("The required version is not in the format x, x.y or x.y.z. Got: "+t);for(let a=0,d=i.length;a<d;a++){const e=o[a],t=i[a];if(e!==t){s=!(e<t);break}}if(!1===s&&!0===r)throw new Error("You do not have the required Vue version of "+t+". You have: "+e.version);return s}function l(e,t,n){return o=>{const i=t[o];return"number"!==typeof i?n:e[i]}}const w=function(e={}){const t=e.container||"container",n=e.index||"index",o="noResult"in e?e.noResult:null;return function(e){if("object"!==typeof e[n])throw new Error("Name of index does not point to an object in state: "+n);if("object"!==typeof e[t])throw new Error("Name of container does not point to an object in state: "+t);return l(e[t],e[n],o)}},h=function(e,t){if("undefined"===typeof t||!("prop"in t)||!("val"in t))throw new Error("Missing property on data parameter: provide 'prop' and 'val'.");if(!(t.prop in e))throw new Error("Tried to set non-existing property: "+t.prop);e[t.prop]=t.val},m=function(e,t){const n=[];for(const o in t)o in e?e[o]=t[o]:n.push(o);if(n.length>0)throw new Error("Tried to set at least one non-existing property: "+n.join(","))};function y(e,t,n){const o=n.id;if("undefined"===typeof o)throw new Error("Missing id on data parameter.");const i=t[o];if("undefined"===typeof i)throw new Error("Id not found in index while setting prop/s on element: "+JSON.stringify(n));const r=e[i],s=[];delete n.id;for(const a in n)a in r?r[a]=n[a]:s.push(a);if(s.length>0)throw new Error("Tried to set at least one non-existing property: "+s.toString(","))}const g=function(e={}){const t=e.container||"container",n=e.index||"index";return function(e,o){if("object"!==typeof e[n])throw new Error("Name of index does not point to an object in state: "+n);if("object"!==typeof e[t])throw new Error("Name of container does not point to an object in state: "+t);y(e[t],e[n],o)}};function v(e,t,n){t.commit(e,n)}const x=function(e){if("string"===typeof e)return function(t,n){v(e,t,n)};if(e instanceof Array){const t={};return e.forEach(e=>{if("string"!==typeof e)throw new Error("Expected element of array to be of type string. Got: "+typeof e);t[e]=function(t,n){v(e,t,n)}}),t}if("object"===typeof e){for(const t in e){const n=t,o=e[t];e[n]=function(e,t){v(o,e,t)}}return e}throw new Error("Expected parameter to be of type string, object or array. Got: "+typeof e)},b=i,E=s;function O(){return{id:"string",name:"string",header:"string",title:"string",context:null,zIndex:"number",x:"number",y:"number",w:null,h:null,className:"string",opened:"boolean",minimized:"boolean",maximized:"boolean"}}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){_(e,t,n[t])})}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j={namespaced:!0,state:{init:!1,windows:[],index:{},defaultHeader:"",highestZ:40001,startingZ:40001},getters:{windows:function(e){return e.windows}},mutations:{set:b.setArrayElPropsByIdFactory({container:"windows"}),setState:b.setPropVal,addWindows:function(e,t){if(e.init)return!1;for(var n=t.windows,o=0,i=n.length;o<i;o++){if("undefined"===typeof n[o].id||"undefined"===typeof n[o].name)throw new Error("Missing property on data. Require at least id and name. Got: "+JSON.stringify(n[o]));if("undefined"!==typeof e.index[n[o].id])throw new Error("Tried to add window with existing id: "+n[o].id);var r=O();r.id=n[o].id,r.name=n[o].name,r.title=n[o].title||"",r.header="undefined"===typeof n[o].header?e.defaultHeader:n[o].header,r.className=n[o].className||"",r.opened=!1,r.minimized=!1,r.maximized=!1,r.context=null,r.zIndex=e.startingZ,r.x=1,r.y=1,r.w=null,r.h=null;var s=e.windows.push(r)-1;e.index[n[o].id]=s}return e.init=!0,!0}},actions:S({},E.passThruActionsFactory(["set","setState"]),{open:function(e,t){var n="string"===typeof t?t:t.id,o={id:n,opened:!0};e.dispatch("moveIntoForeground",n),"undefined"!==typeof t.context&&(o.context=t.context),e.commit("set",o)},close:function(e,t){e.commit("set",{id:t,opened:!1,context:null})},moveIntoForeground:function(e,t){var n=e.state.highestZ+1;e.commit("set",{id:t,zIndex:n}),e.commit("setState",{prop:"highestZ",val:n})},init:function(e,t){return!e.state.init&&("undefined"!==typeof t&&(e.commit("addWindows",t),!0))},destroy:function(e){for(var t=e.state.windows,n=0,o=t.length;n<o;n++)e.commit("set",{id:t[n].id,opened:!1,context:null,zIndex:e.state.startingZ});e.commit("setState",{prop:"highestZ",val:e.state.startingZ})}})},M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"plugin-wrapper-windows"}},e._l(e.listOfWindows,function(e){return n("inapp-window",{key:e.id,attrs:{window:e}})}),1)},$=[],W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"inapp-window_transition"}},[n("div",{ref:"window"+e.window.id,class:["inapp-window"].concat(e.extraClasses),style:[{zIndex:e.zIndex,top:e.top,left:e.left},e.maxedStyles],attrs:{id:"inapp-window_"+e.window.id},on:{"!mousedown":function(t){return e.moveIntoForeground(t)}}},[""!==e.window.header?n("div",{staticClass:"inapp-window_header"},[n(e.window.header,{tag:"component",attrs:{window:e.window,funcs:{close:e.close,toggleMin:e.toggleMin,toggleMax:e.toggleMax,move:e.move}}})],1):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:""===e.window.header||!1===e.window.minimized,expression:"window.header === '' || window.minimized === false"}],staticClass:"inapp-window_body",staticStyle:{width:"100%",height:"100%"}},[n(e.window.name,{tag:"component",attrs:{window:e.window,funcs:{close:e.close,toggleMin:e.toggleMin,toggleMax:e.toggleMax,move:e.move}}})],1)])])},I=[];function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){P(e,t,n[t])})}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}var z={name:"inapp-window",props:{window:{type:Object,required:!0,validator:function(e){var t=O();for(var n in t){if(!(n in e))return console.error(n,"is not on window"),!1;if(null!==t[n]&&T(e[n])!==t[n])return console.error(n,"'s value",e[n],"is not of type",t[n]),!1}return!0}},header:String,title:String},data:function(){return{namespace:"inAppWindows",xBeforeMax:0,yBeforeMax:0,wBeforeMax:0,hBeforeMax:0}},computed:{zIndex:function(){return this.window.zIndex},top:function(){return this.window.y+"px"},left:function(){return this.window.x+"px"},maxedStyles:function(){return this.window.maximized?{top:"0px",left:"0px",width:"100%",height:"100%",position:"fixed"}:{}},extraClasses:function(){var e=this.window.className.trim();return""===e?[]:e.split(" ")}},methods:{close:function(){this.$store.dispatch(this.namespace+"/close",this.window.id)},toggleMin:function(){this.window.maximized&&this.toggleMax(),this.$store.dispatch(this.namespace+"/set",{id:this.window.id,minimized:!this.window.minimized})},toggleMax:function(){var e=this.window.maximized;this.window.minimized&&this.toggleMin();var t=e?this.deEnlarge():this.enlarge();this.$store.dispatch(this.namespace+"/set",N({id:this.window.id,maximized:!e},t))},getViewportRect:function(){var e=20,t=document.documentElement.clientWidth||document.body.clientWidth||window.innerWidth-e,n=document.documentElement.clientHeight||document.body.clientHeight||window.innerHeight-e;return{w:t,h:n}},getPageRect:function(){var e=document.body,t=document.documentElement,n=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),o=Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth);return{w:o,h:n}},getContainment:function(e){var t=""!==e.style.position?e.style.position:window.getComputedStyle(e).position;return"fixed"===t?this.getViewportRect():this.getPageRect()},enlarge:function(){var e=0,t=0,n=this.getViewportRect(),o=n.w,i=n.h;return o-=2,i-=2,this.xBeforeMax=this.window.x,this.yBeforeMax=this.window.y,this.wBeforeMax=this.window.w,this.hBeforeMax=this.window.h,{x:e,y:t,w:o,h:i}},deEnlarge:function(){var e=this.xBeforeMax,t=this.yBeforeMax,n=this.wBeforeMax,o=this.hBeforeMax;return this.xBeforeMax=0,this.yBeforeMax=0,this.wBeforeMax=0,this.hBeforeMax=0,{x:e,y:t,w:n,h:o}},move:function(e,t){var n=this.getContainment(this.$refs["window"+this.window.id]),o=this.preventOutOfBounds(e,t,this.window.w,this.window.h,n.w,n.h),i=o.x,r=o.y;this.$store.dispatch(this.namespace+"/set",{id:this.window.id,x:i,y:r})},preventOutOfBounds:function(e,t,n,o,i,r){var s=e,a=t,d=n;return a<0?a=1:a>r&&(a=r-10),s>i?s=i-10:s+d<0&&(s=-1*d+1),{x:s,y:a}},moveIntoForeground:function(){this.$store.dispatch(this.namespace+"/moveIntoForeground",this.window.id)}},created:function(){if("undefined"===typeof this.window)throw new Error("Failed to provide 'window' property to window component.");"undefined"!==typeof this.$options[k].namespace&&(this.namespace=this.$options[k].namespace),"undefined"!==typeof this.header&&this.header!==this.window.header&&this.$store.dispatch(this.namespace+"/set",{id:this.window.id,header:this.header})},mounted:function(){var e="window"+this.window.id,t=this.$refs[e].offsetWidth,n=this.$refs[e].offsetHeight;this.$store.dispatch(this.namespace+"/set",{id:this.window.id,w:t,h:n})},destroyed:function(){this.window.maximized&&this.toggleMax()}},C=z;function B(e,t,n,o,i,r,s,a){var d,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),o&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),s?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=d):i&&(d=a?function(){i.call(this,this.$root.$options.shadowRoot)}:i),d)if(c.functional){c._injectStyles=d;var f=c.render;c.render=function(e,t){return d.call(t),f(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,d):[d]}return{exports:e,options:c}}var A=B(C,W,I,!1,null,null,null),H=A.exports,R={};R[H.name]=H;var F={props:{defaultHeader:String},name:"inapp-window-container",components:R,computed:{listOfWindows:function(){var e=this.namespace+"/windows",t=this.$store.getters[e];return t.filter(function(e){return e.opened})}},data:function(){return{namespace:"inAppWindows"}},installHeaders:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0!==t.length&&(e.components=e.components||{},t.forEach(function(t){if(!("name"in t))throw new Error("Header component does not have a name property: "+JSON.stringify(t));if(void 0!==e.components[t.name])throw new Error("Duplicate names: tried to install a header whose name already exists: "+t.name);e.components[t.name]=t}),!0)},installWindows:function(e,t,n,o){if(!(e instanceof Array))throw new Error("Window container is not an array.");t.components=t.components||{},e.forEach(function(e){if(!("name"in e))throw new Error("Window component does not have a name property: "+JSON.stringify(e));if(void 0!==t.components[e.name])throw new Error("Duplicate names: tried to install a custom window whose name already exists: "+e.name);t.components[e.name]=e,e[o]=e[n]||{},delete e[n]})},install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this,i=o[n.postOptions];if(void 0===i)throw new Error("Failed to install user windows to the window container. Do not call the install function of the window container component. Use the plugin installer instead.");o.installHeaders(H,t.headers),o.installWindows(e,H,n.preUser,n.postUser),i.userWindows=e,i.postInstallComponentNamespace=n.postUser,i.init=!1,i.storeNamespace=n.store,delete o.installHeaders,delete o.installWindows,delete o.install},methods:{installNamespace:function(e){var t=this.$options[e].storeNamespace;if("undefined"!==typeof t)return this.namespace=t,!0;throw new Error("Failed to install namespace to window container. Is the $options namespace valid: "+e)},installDefaultHeader:function(e,t){return"undefined"!==typeof e&&(this.$store.dispatch(t+"/setState",{prop:"defaultHeader",val:e}),!0)},installWindowsToStore:function(e,t,n){for(var o=[],i=0,r=e.length;i<r;i++){var s=e[i],a=s[n];a.name=s.name,a.id=a.id||a.name,o.push(a),delete s[n]}this.$store.dispatch(t+"/init",{windows:o})},postInstall:function(){var e=this.$options[k];return this.installNamespace(k),!0!==e.init&&(this.installDefaultHeader(this.defaultHeader,this.namespace),this.installWindowsToStore(e.userWindows,this.namespace,e.postInstallComponentNamespace),e.init=!0,delete e.userWindows,delete e.postInstallComponentNamespace,!0)}},created:function(){this.postInstall()}},V=F,q=B(V,M,$,!1,null,null,null),D=q.exports,U="$state",Z="inAppWindows",G="$_inAppWindows_state",k="$_inAppWindows_postInstall",J=H,L=D;function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={storeNamespace:{type:"string",default:Z},componentNamespace:{type:"string",default:U},windows:{type:"object",required:!0},headers:{type:"object",default:[]},vuex:{type:null}};return a(e,t)}var Y={install:function(e,t){u(e,"2.6",{throwInsteadOfReturn:!0});var n=X(t);Z=n.storeNamespace,U=n.componentNamespace,p(n.vuex,Z,j),c(U,!0);var o={},i={};o[k]={namespace:Z},i[k]={},f(H,o),f(D,i),D.install(n.windows,{headers:n.headers},{postOptions:k,postUser:G,preUser:U,store:Z})}};n.d(t,"POSTINSTALL_OBJ_NAMESPACE",function(){return k}),n.d(t,"inAppWindow",function(){return J}),n.d(t,"inAppWindowContainer",function(){return L}),n.d(t,"installer",function(){return Y})}})});